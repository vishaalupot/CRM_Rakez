@model List<CRM_Raviz.Models.MobileNo>

@{
    ViewData["Title"] = "Mobile Numbers";
}
    
<h1>Mobile Numbers</h1>

<table class="table">
    <thead>
        <tr>
            <th>Number</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>@item.Numbers</td>
                <td>
                    <button onclick="copyToClipboard('@item.Numbers')">
                        <i class="fas fa-copy"></i>
                    </button>
                    <button onclick="editNumber(@item.Id, '@item.Numbers')">
                        <i class="fas fa-edit"></i>
                    </button>
                </td>
            </tr>
        }
    </tbody>
</table>

<script>
    function copyToClipboard(number) {
        navigator.clipboard.writeText(number).then(() => {
            alert('Number copied to clipboard');
        }).catch(err => {
            console.error('Failed to copy: ', err);
        });
    }

    function editNumber(id, number) {
        const newNumber = prompt("Edit Number", number);
        if (newNumber !== null && newNumber !== number) {
            const form = document.createElement("form");
            form.method = "post";
            form.action = "/MobileNo/EditNumber";

            const idField = document.createElement("input");
            idField.type = "hidden";
            idField.name = "id";
            idField.value = id;

            const numberField = document.createElement("input");
            numberField.type = "hidden";
            numberField.name = "newNumber";
            numberField.value = newNumber;

            form.appendChild(idField);
            form.appendChild(numberField);
            document.body.appendChild(form);

            form.submit();
        }
    }
</script>

<!-- Include FontAwesome for icons -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
